#!/bin/bash
# This is the command to use when running interactive commands
# eg:
#   edi ember release --minor

VERSION="@EMBER_VERSION"

if [ -r ~/.config/edi/settings ]
then
    . ~/.config/edi/settings
fi



@SUPPORT_SCRIPTS



docker_image=`edi_calculate_docker_image`
standard_options=`edi_calculate_standard_docker_options`

if [ -n "$EDI_USE_EDI_DAEMON" ]
then
    daemon_name=`edi_start_edi_daemon "$docker_image" "$standard_options"`

    # run command
    echo "Executing command $@ on $daemon_name"
    docker exec -ti $daemon_name $@
else
    docker run --rm \
           -it \
           $standard_options \
           $docker_image $@
fi
